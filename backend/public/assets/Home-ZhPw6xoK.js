import{Q as d,i as f,h as x,k as l,m,n as p,j as s,o as v,B as N,C as F}from"./index-DVVaJp0R.js";import{D as b,P as j}from"./Post-_-qGY4Kc.js";import"./index-BCqmEMr2.js";var y=class extends d{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:f()},t)}getOptimisticResult(e){return e.behavior=f(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var u,o,g,P;const{state:i}=e,a=super.createResult(e,t),{isFetching:n,isRefetching:c}=a,h=n&&((o=(u=i.fetchMeta)==null?void 0:u.fetchMore)==null?void 0:o.direction)==="forward",r=n&&((P=(g=i.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:P.direction)==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:x(t,i.data),hasPreviousPage:l(t,i.data),isFetchingNextPage:h,isFetchingPreviousPage:r,isRefetching:c&&!h&&!r}}};function M(e,t){return m(e,y,t)}function R(){const{data:e,isFetching:t,isPending:i,fetchNextPage:a,fetchPreviousPage:n,hasNextPage:c,isFetchingNextPage:h,isFetchingPreviousPage:r,...u}=M({queryKey:["posts"],queryFn:({pageParam:o=1})=>p(o),getNextPageParam:o=>o.nextPage||null});return{data:e,isPending:i,isFetching:t,fetchNextPage:a,fetchPreviousPage:n,hasNextPage:c,isFetchingNextPage:h,isFetchingPreviousPage:r,...u}}function O(){const{data:e,isPending:t,isFetching:i,hasNextPage:a,fetchNextPage:n,isFetchingNextPage:c}=R();return t?s.jsx(v,{}):s.jsxs(b,{children:[e&&e.pages.map(h=>s.jsx(s.Fragment,{children:h.posts.map(r=>s.jsx(j,{post:r},r._id))})),c&&s.jsx("h3",{children:"Loading ..."}),a&&s.jsx(N,{type:"primary",size:"small",disabled:c,onClick:n,children:"Load More"})]})}function B(){return s.jsxs(s.Fragment,{children:[s.jsx(F,{}),s.jsx(O,{})]})}export{B as default};
