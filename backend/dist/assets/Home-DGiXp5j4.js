import{Q as d,i as f,h as x,k as l,m,n as p,j as s,o as v,B as N,C as b}from"./index-DqRnGjoO.js";import{D as j,P as F}from"./Post-G1DVQ4zc.js";import"./index-LlFj7zuZ.js";var y=class extends d{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:f()},t)}getOptimisticResult(e){return e.behavior=f(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var u,c,g,P;const{state:i}=e,n=super.createResult(e,t),{isFetching:r,isRefetching:h}=n,a=r&&((c=(u=i.fetchMeta)==null?void 0:u.fetchMore)==null?void 0:c.direction)==="forward",o=r&&((P=(g=i.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:P.direction)==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:x(t,i.data),hasPreviousPage:l(t,i.data),isFetchingNextPage:a,isFetchingPreviousPage:o,isRefetching:h&&!a&&!o}}};function M(e,t){return m(e,y,t)}function R(){const{data:e,isFetching:t,isPending:i,fetchNextPage:n,fetchPreviousPage:r,hasNextPage:h,isFetchingNextPage:a,isFetchingPreviousPage:o,...u}=M({queryKey:["posts"],queryFn:({pageParam:c=1})=>p(c),getNextPageParam:c=>c.nextPage||null});return{data:e,isPending:i,isFetching:t,fetchNextPage:n,fetchPreviousPage:r,hasNextPage:h,isFetchingNextPage:a,isFetchingPreviousPage:o,...u}}function O(){const{data:e,isPending:t,hasNextPage:i,fetchNextPage:n,isFetchingNextPage:r}=R();return t?s.jsx(v,{}):s.jsxs(j,{children:[e&&e.pages.map(h=>s.jsx(s.Fragment,{children:h.posts.map(a=>s.jsx(F,{post:a},a._id))})),r&&s.jsx("h3",{children:"Loading ..."}),i&&s.jsx(N,{type:"primary",size:"small",disabled:r,onClick:n,children:"Load More"})]})}function B(){return s.jsxs(s.Fragment,{children:[s.jsx(b,{}),s.jsx(O,{})]})}export{B as default};
